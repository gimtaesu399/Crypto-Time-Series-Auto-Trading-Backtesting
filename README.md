ML 기반 암호화폐 트레이딩 시스템 — 설계 개요
1. 시스템 목표

본 시스템은 사람이 설계한 매매 로직을 출발점으로 하여,
백테스트를 통해 유효성을 검증하고,
머신러닝으로 전략 성공 확률을 추정한 뒤,
시장 상황(레짐)에 맞는 전략을 선택하여
확률 기반 모의투자를 수행하는 것을 목표로 한다.

핵심 아이디어는 다음과 같다.

“전략의 옳고 그름을 ML이 직접 판단하지 않는다.
전략은 사람이 만들고,
ML은 그 전략이 지금 성공할 확률만 계산한다.”

2. 전체 구조 요약

시스템은 항상 아래 순서로 동작한다.

사람이 정의한 매매 로직(전략)을 기준으로 진입 후보를 만든다

과거 데이터로 백테스트를 수행해, 전략별 최적 조건을 찾는다

최적 조건 기준으로 성공/실패 라벨을 생성한다

라벨을 정답으로 하여 성공 확률을 예측하는 모델을 학습한다

현재 시장 레짐을 판단한다

레짐에 맞는 전략 + 모델을 선택한다

확률 기반 규칙으로 모의투자를 실행한다

3. 전략 구조 (Handcrafted Strategy)

전략은 시장 레짐별로 3개만 존재한다.

상승장 전략 (Uptrend Strategy)

횡보장 전략 (Sideways Strategy)

하락장 전략 (Downtrend Strategy)

각 전략의 역할은 단 하나다.

“이 시점이 진입을 고려할 만한가?”

전략은 진입 신호만 생성하며,
수익/손실 판단은 하지 않는다.

4. 백테스트 및 조건 탐색

각 전략은 과거 데이터에 대해 백테스트를 수행하며,
다양한 진입/청산 조건을 바꿔가며 실험한다.

예:

진입 후 +1%, +2%, +3% 도달

손절 -1%, -2%

최대 보유 기간 변화

진입 시점 지연(신호 후 몇 캔들 뒤 진입)

이 과정의 목적은 단순하다.

“이 전략이 가장 안정적으로 수익을 냈던 조건은 무엇인가?”

전략마다 하나의 최적 조건 세트를 선정한다.

5. 라벨 생성 방식

최적 조건이 확정되면,
과거 모든 진입 시점에 대해 단순 라벨을 생성한다.

성공(1): 조건 내에서 목표 수익률 도달

실패(0): 손절 또는 기간 종료

이 라벨은 모델 학습을 위한 정답 데이터로 사용된다.

라벨은 단순하지만,
조건은 이미 백테스트로 검증되었기 때문에
노이즈가 과도하지 않다는 전제를 둔다.

6. 확률 모델 구조

시장 레짐별로 모델을 3개 분리한다.

상승장 모델

횡보장 모델

하락장 모델

각 모델의 역할은 동일하다.

“지금 이 전략을 실행했을 때
성공할 확률은 얼마인가?”

모델 출력은 항상 다음 범위의 값이다.

𝑃
(
𝑡
)
∈
[
0
,
1
]
P(t)∈[0,1]

모델은 전략을 대체하지 않으며,
전략 실행 여부와 비중을 결정하는 보조 판단자로만 사용된다.

7. 시장 레짐 판단

현재 시장은 항상 아래 중 하나로 분류된다.

상승장

횡보장

하락장

초기 버전에서는 단순 규칙 기반으로 분류한다.
(예: 가격과 장기 이동평균, 변동성 기준)

레짐 판단의 목적은 정확도가 아니라 전략 분리이다.

8. 레짐 기반 전략 선택

현재 레짐에 따라 고정된 조합을 사용한다.

상승장 → 상승 전략 + 상승 모델

횡보장 → 횡보 전략 + 횡보 모델

하락장 → 하락 전략 + 하락 모델

하나의 전략이나 모델을 모든 시장에 쓰지 않는다.

9. 확률 기반 모의투자 규칙

진입 여부와 비중은 모델 확률에 따라 결정된다.

예시 규칙:

𝑃
(
𝑡
)
<
0.6
P(t)<0.6 → 진입하지 않음

0.6
≤
𝑃
(
𝑡
)
<
0.7
0.6≤P(t)<0.7 → 소액 진입

𝑃
(
𝑡
)
≥
0.7
P(t)≥0.7 → 적극 진입

비중은 확률에 비례하여 조정하며,
손절/익절 또는 레짐 변경 시 포지션을 정리한다.

목표는 단기 예측 정확도가 아니라,
확률 분포 상에서 장기 기대수익이 양수가 되도록 만드는 것이다.

10. 시스템 성격 요약

전략은 사람이 만든다

모델은 전략의 성공 확률만 계산한다

시장은 하나의 전략으로 해결하지 않는다

모든 의사결정은 확률 기반으로 이루어진다

최종 평가는 단일 트레이드가 아니라 누적 수익 분포로 한다
